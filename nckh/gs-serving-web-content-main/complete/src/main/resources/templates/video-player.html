<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Video Player - NCKH Platform</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
        .nav a { padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; margin-right: 10px; }
        .video-container { background: #000; border-radius: 8px; margin: 20px 0; text-align: center; padding: 20px; }
        .video-placeholder { background: #333; color: white; padding: 100px; border-radius: 8px; }
        .progress-bar { width: 100%; height: 10px; background: #ddd; border-radius: 5px; margin: 20px 0; }
        .progress { height: 100%; background: #28a745; border-radius: 5px; width: 0%; transition: width 0.3s; }
        .log-info { background: #e9ecef; padding: 15px; border-radius: 8px; margin: 20px 0; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <div style="margin-bottom: 20px;">
            <a href="/">ğŸ  Home</a>
            <a href="/videos">ğŸ“º Videos</a>
        </div>

        <h1>ğŸ¬ Äang phÃ¡t: <span th:text="${videoTitle} ?: 'Spring Boot Tutorial'"></span></h1>
        
        <div class="video-container">
            <div class="video-placeholder">
                <h2>ğŸ¥ VIDEO PLAYER</h2>
                <p>Video ID: <span th:text="${videoId} ?: '1'"></span></p>
                <p>ğŸ”Š Ã‚m thanh | â¸ï¸ Táº¡m dá»«ng | â© 10s</p>
                <button onclick="simulateWatch()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px;">
                    â–¶ï¸ Báº¯t Ä‘áº§u há»c (Simulate)
                </button>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div style="text-align: center;">
            <span id="progress-text">0%</span>
        </div>

        <div class="log-info">
            <h3>ğŸ“Š Log Há»c Táº­p (Real-time)</h3>
            <div id="log-output" style="height: 100px; overflow-y: auto; background: white; padding: 10px; border-radius: 4px;"></div>
        </div>

        <div style="margin-top: 30px;">
            <a href="/quiz/1" style="padding: 12px 24px; background: #dc3545; color: white; text-decoration: none; border-radius: 5px; display: inline-block;">
                ğŸ“ LÃ m BÃ i Táº­p Sau Video
            </a>
        </div>
    </div>

    <script>
        let progress = 0;
        const logOutput = document.getElementById('log-output');
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logOutput.innerHTML += `[${timestamp}] ${message}<br>`;
            logOutput.scrollTop = logOutput.scrollHeight;
        }

        function simulateWatch() {
            log("ğŸ¬ Báº¯t Ä‘áº§u xem video...");
            
            const interval = setInterval(() => {
                progress += 5;
                document.getElementById('progress').style.width = progress + '%';
                document.getElementById('progress-text').textContent = progress + '%';
                
                if (progress % 20 === 0) {
                    log(`ğŸ“Š ÄÃ£ xem Ä‘Æ°á»£c ${progress}% video`);
                }
                
                if (progress >= 100) {
                    clearInterval(interval);
                    log("âœ… ÄÃ£ hoÃ n thÃ nh video!");
                    log("ğŸ“ˆ Log Ä‘Ã£ Ä‘Æ°á»£c ghi vÃ o MongoDB");
                }
            }, 1000);
        }

        // Auto log khi trang load
        log("ğŸ“¹ Video player Ä‘Ã£ sáºµn sÃ ng");
        log("ğŸ›¢ï¸ Káº¿t ná»‘i MongoDB: âœ…");
    </script>
</body>
</html>